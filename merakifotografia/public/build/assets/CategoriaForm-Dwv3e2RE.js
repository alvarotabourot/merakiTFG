import{T as _,y as x,f as y,o as l,c as m,b as t,a as i,t as d,u as r,d as v,k as w,z as C,h as k}from"./app-Ciu3P-SA.js";import{a as f,_ as j}from"./InputLabel-Boxk0wKV.js";import{h as F}from"./heic2any-TgjPBaeP.js";const I={class:"text-2xl text-amethyst-6 font-mono font-bold text-center mb-4"},L={class:"mt-3"},N={class:"flex flex-col items-center justify-center w-full relative"},S={for:"foto",class:"flex flex-col items-center justify-center w-full h-64 border-2 border-dashed rounded-lg cursor-pointer bg-white"},E={class:"flex flex-col items-center justify-center pt-5 pb-6"},U={key:0,class:"absolute h-64 inset-0 flex items-center justify-center bg-black border-2 border-white-500 border-amethyst-5 rounded-lg cursor-pointer"},$=["src"],B=t("p",{class:"mb-2 text-sm text-amethyst-7"},[t("span",{class:"font-semibold"},"Seleccione la foto de la Categoría")],-1),R={class:"mt-4"},z=t("label",{for:"fecha_ini",class:"block text-sm font-medium text-amethyst-7"},"Nombre",-1),D={class:"flex items-center justify-end mt-4"},O={type:"submit",class:"text-white bg-amethyst-6 hover:bg-amethyst-8 focus:outline-none focus:ring-4 focus:ring-blue-300 font-medium rounded-full text-sm px-4 py-2 transition-colors duration-200"},G={__name:"CategoriaForm",props:{categoria:Object},emits:["formSubmitted","closeForm"],setup(u,{emit:p}){const c=u,b=p,e=_({id:null,nombre:null,foto:null,currentImage:null});c.categoria&&x(c.categoria,s=>{s&&(e.id=s.id||null,e.currentImage=s.foto?`/imagenes/fotosCategorias/${s.foto}`:null,e.nombre=s.nombre||"")},{immediate:!0});const h=async s=>{const o=s.target.files[0];if(o)if(o.name.split(".").pop().toLowerCase()==="heic"||o.name.split(".").pop().toLowerCase()==="hevc")try{const a=await F({blob:o,toType:"image/png"}),n=new File([a],o.name.split(".")[0]+".png",{type:"image/png"});e.foto=n,e.currentImage=URL.createObjectURL(n)}catch(a){console.error("Error converting HEIC to PNG: ",a)}else e.foto=o,e.currentImage=URL.createObjectURL(o)},g=()=>{const s=new FormData;s.append("_method",e.id?"put":"post"),e.foto&&s.append("portada",e.foto);const o=e.id?"categoria.update":"categoria.create";e.post(route(o,e.id?e.id:""),{data:s,onSuccess:()=>{e.reset(),b("formSubmitted")},onError:()=>{}})};return(s,o)=>{const a=y("font-awesome-icon");return l(),m("form",{onSubmit:k(g,["prevent"]),enctype:"multipart/form-data",class:"w-70 p-4 h-[25rem] md:h-[25rem] overflow-auto bg-amethyst-2 text-white relative rounded-lg"},[t("button",{onClick:o[0]||(o[0]=n=>s.$emit("closeForm")),class:"text-gray-400 absolute right-2 top-2 text-xl font-bold focus:outline-none"},[i(a,{icon:["fas","xmark"]})]),t("h2",I,d(r(e).id?"Editar":"Crear")+" categoría",1),t("div",L,[i(j,{for:"foto",value:"Foto",class:"text-amethyst-7 text-sm font-bold mb-2"}),t("div",N,[t("input",{type:"file",id:"foto",name:"foto",class:"mt-1 hidden w-full z-10 opacity-0 cursor-pointer",onChange:h},null,32),t("label",S,[t("div",E,[r(e).currentImage?(l(),m("div",U,[t("img",{class:"w-full h-full object-contain",src:r(e).currentImage,alt:"Vista previa de la imagen"},null,8,$)])):v("",!0),i(a,{icon:["fas","camera"],class:"text-amethyst-8 text-8xl"}),B])])]),i(f,{message:r(e).errors.foto,class:"mt-2 text-red-500"},null,8,["message"])]),t("div",R,[z,w(t("input",{type:"text",id:"fecha_ini","onUpdate:modelValue":o[1]||(o[1]=n=>r(e).nombre=n),class:"mt-1 text-black block w-full p-1 text-center"},null,512),[[C,r(e).nombre]]),i(f,{message:r(e).errors.nombre,class:"mt-2"},null,8,["message"])]),t("div",D,[t("button",O,d(r(e).id?"Actualizar":"Crear"),1)])],32)}}};export{G as default};
